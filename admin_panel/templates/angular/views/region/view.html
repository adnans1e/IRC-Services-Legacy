<section class="content-header" ng-controller="ContentHeaderController as chctrl">
    <h1>
        {{ chctrl.state.data.title }}
        <small>{{ ctrl.region.name}}</small>
    </h1>
</section>
<form role="form" name="regionForm">
    <section class="content">
        <div>
            <div class="row" read-only-form is-editing="ctrl.isEditing">
                <div class="col-xs-12">
                    <div class="box box-default">
                        <div class="box-body">

                            <div class="form-group col-xs-6">
                                <label for="name">Name</label>
                                <input type="text" class="form-control" id="name" placeholder="Name" ng-model="ctrl.object.name" required>
                            </div>

                            <div class="form-group col-xs-6">
                                <label for="slug">Slug</label>
                                <input type="text" class="form-control" id="slug" placeholder="Slug" ng-model="ctrl.object.slug" required>
                            </div>
                            <div class="form-group col-xs-6" ng-if="ctrl.object.level > 1">
                                <label for="parent">Parent</label>
                                <select class="form-control" name="parent" ng-model="ctrl.object.parent" ng-options="r.id as r.name for r in ctrl.allRegions"></select>

                            </div>

                            <div class="form-group col-xs-6">
                                <label for="level">Level</label>
                                <select class="form-control" name="level" ng-model="ctrl.object.level" ng-options="r.id as r.name for r in ctrl.levels" required></select>

                            </div>
                            <div class="form-group col-xs-6">
                                <label for="code">Code</label>
                                <input type="text" class="form-control" id="code" placeholder="Code" ng-model="ctrl.object.code">
                            </div>
                            <div class="form-group col-xs-12">
                                <div class="checkbox ">
                                    <label>
                                        <input type="checkbox" ng-model="ctrl.object.hidden"> Is Hidden
                                    </label>
                                </div>
                            </div>
                        </div>
                        <!-- /.box-body -->
                    </div>
                </div>
            </div>
            <div class="row" read-only-form is-editing="ctrl.isEditing">
                <div class="col-xs-12">
                    <div class="box">
                        <div class="box-header">
                            <h3 class="box-title">Translated Fields</h3>
                        </div>
                        <div class="box-body">
                            <div class="nav-tabs-custom">
                                <ul class="nav nav-tabs">
                                    <li ng-class="{active: ctrl.selectedLanguageTab == (lang[0]||'en')}" ng-repeat="lang in languages">
                                        <a href="" ng-click="ctrl.selectedLanguageTab = lang[0]" data-toggle="tab" aria-expanded="true">{{ lang[1] }}</a>
                                    </li>
                                </ul>
                                <div class="tab-content">
                                    <div class="tab-pane" ng-class="{active: ctrl.selectedLanguageTab == (lang[0]||'en')}" ng-repeat="lang in languages">
                                        <div class="row">
                                            <div class="form-group col-xs-12">
                                                <label for="{{ idHelper('title',lang[0]) }}">Title</label>
                                                <input type="text" class="form-control" ng-model="ctrl.object[idHelper('title',lang[0])]" placeholder="Title in {{ lang[1] }}">
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <!-- /.tab-content -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" read-only-form is-editing="ctrl.isEditing">
                <div class="col-xs-12">
                    <div class="box">
                        <div class="box-header">
                            <h3 class="box-title">Region Outline</h3>
                        </div>
                        <div class="box-body">
                            <leaflet defaults="{
            tileLayer: 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
            maxZoom: 14,
            drawControl: true,
            path: {
                weight: 10,
                color: '#800000',
                opacity: 1
            }
        }" id="map-simple-map" height="480px"></leaflet>
                        </div>

                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-xs-12">
                    <div class="box">

                        <div class="box-footer">
                            <div class="btn-group pull-right">
                                <button type="button" class="btn btn-primary" ng-if="!ctrl.isEditing" ng-click="ctrl.startEditing()">Edit
                                </button>
                                <button type="button" class="btn btn-primary" ng-if="ctrl.isEditing" ng-click="ctrl.save()" ng-disabled="!ctrl.object.geom.coordinates || ctrl.object.geom.coordinates.length === 0 || regionForm.$invalid">
                                    Save
                                </button>
                                <button type="button" class="btn btn-danger" ng-if="!ctrl.isEditing && user.isSuperuser" ng-click="ctrl.remove()">
                                    Delete
                                </button>
                                <button type="button" class="btn btn-warning" ng-if="ctrl.isEditing" ng-click="ctrl.stopEditing()">Cancel
                                </button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>
</form>