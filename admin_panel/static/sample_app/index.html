<!DOCTYPE html>
<html> <!--manifest="cache.manifest"-->
<head>
    <meta charset="utf-8">
    <title>Ratchet template page</title>

    <!-- Sets initial viewport load and disables zooming  -->
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">

    <!-- Makes your prototype chrome-less once bookmarked to your phone's home screen -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <!-- Include the compiled Ratchet CSS -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/ratchet/2.0.2/css/ratchet.min.css" rel="stylesheet">

    <!-- Include the compiled Ratchet JS -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/ratchet/2.0.2/js/ratchet.min.js"></script>
    <style>
        body {
            margin-top: 10px;
        }
    </style>
</head>
<body>

<header class="bar bar-nav">
    <a class="icon icon-bars pull-left" href="javascript:run('openDrawer')"></a>
    <a class="icon icon-compose pull-right"></a>
    <h1 class="title">Title</h1>
</header>

<div class="content">
    <ul class="table-view">
        <li class="table-view-cell media">
            <a class="navigate-right" href="javascript:run('serviceList')" data-transition="slide-in">
                <span class="media-object icon icon-pages pull-left"></span>
                <div class="media-body">
                    All inboxes
                </div>
            </a>
        </li>
        <li class="table-view-cell media">
            <a class="navigate-right" href="javascript:run('serviceMap')" data-transition="slide-in">
                <span class="media-object icon icon-person pull-left"></span>
                <div class="media-body">
                    Personal email
                </div>
            </a>
        </li>
        <li class="table-view-cell media">
            <a class="navigate-right" href="inbox.html" data-transition="slide-in">
                <span class="media-object icon icon-star-filled pull-left"></span>
                <div class="media-body">
                    Starred
                </div>
            </a>
        </li>
        <li class="table-view-cell media">
            <a class="navigate-right" href="inbox.html" data-transition="slide-in">
                <span class="media-object icon icon-trash pull-left"></span>
                <div class="media-body" id="trash">
                    Trash
                </div>
            </a>
        </li>
    </ul>

    <h5 class="content-padded">Other accounts</h5>
    <ul class="table-view">
        <li class="table-view-cell media">
            <a class="navigate-right" href="inbox.html" data-transition="slide-in">
                <span class="media-object icon icon-more pull-left"></span>
                <div class="media-body">
                    Misc
                </div>
            </a>
        </li>
    </ul>
</div><!-- /.content -->

<!-- Compose modal -->
<div id="composeModal" class="modal">
    <header class="bar bar-nav">
        <a class="btn btn-link pull-right" href="#composeModal">
            <strong>Send</strong>
        </a>
        <a class="btn btn-link pull-left" href="#composeModal">
            Cancel
        </a>
        <h1 class="title">New message</h1>
    </header>

    <div class="content">
        <form class="input-group">
            <input type="text" placeholder="To:">
            <input type="email" placeholder="From:">
            <input type="text" placeholder="Subject:">
            <textarea rows="20"></textarea>
        </form>
    </div>
</div><!-- /.modal -->

<script>
    document.addEventListener('message', function (event) {
        var data = JSON.parse(event.data);
        document.getElementById("trash").innerHTML = data.action + '?';

        if(data.action == 'init') {
            init.apply(window, data.arguments)
        }
    });

    function updateSite(event) {
        window.applicationCache.swapCache();
        location.reload();
    }
    window.applicationCache.addEventListener('updateready',
            updateSite, false);

    function init(region, language, deviceId, platform, isStatusBarTranslucent) {
        if (platform.toLocaleLowerCase() == 'ios') {
            addCss("//cdnjs.cloudflare.com/ajax/libs/ratchet/2.0.2/css/ratchet-theme-ios.min.css");
        } else if (platform.toLocaleLowerCase() == 'android') {
            addCss("//cdnjs.cloudflare.com/ajax/libs/ratchet/2.0.2/css/ratchet-theme-android.min.css");
        }

    }

    function addCss(fileName) {

        var head = document.head
                , link = document.createElement('link');

        link.type = 'text/css';
        link.rel = 'stylesheet';
        link.href = fileName;

        head.appendChild(link);
    }

    function run(action, args) {
        window.postMessage(JSON.stringify({action: action, arguments: args}));
    }

    function getParameterByName(name, url) {
        if (!url) {
            url = window.location.href;
        }
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

</script>
</body>
</html>